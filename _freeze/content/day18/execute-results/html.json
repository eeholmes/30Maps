{
  "hash": "a43b1601f1cff933f21c13fa4b670e8e",
  "result": {
    "markdown": "---\ntitle: \"Day 18 blue\"\n---\n\n\n## Code source\n\n[https://twitter.com/leeolney3/status/1593402445283180545](https://twitter.com/leeolney3/status/1593402445283180545)\n\nhttps://github.com/leeolney3/30DayMapChallenge/blob/main/2022/scripts/18_Blue.R\n\n## Code to download the data\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nlibrary(tidyverse)\nlibrary(tigris)\nlibrary(sf)\nlibrary(ggtext)\nlibrary(showtext)\nshowtext_opts(dpi = 300)\nshowtext_auto(enable = TRUE)\n\n# Fonts\nfont_add_google(\"Sora\")\nf1 = \"Sora\"\nfont_add_google(\"Open Sans\")\nf2 = \"Open Sans\"\n\n# Data\nwater_area = area_water(\"washington\", \"okanogan county\", year = 2022) \nwater_linear = linear_water(\"washington\", \"okanogan county\", year = 2022) \n```\n:::\n\n\nSet the bounding box.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nlibrary(osmdata)\nlibrary(sf)\nlibrary(tidyverse)\n\n# Center and circle ----\ncity_coords <- tibble(address = \"Winthrop, Washington\") |> \n  tidygeocoder::geocode(address, method = 'osm', long = long, lat = lat)\n\nlong <- city_coords$long[1]\nlat <- city_coords$lat[1]\n\ncrs2 <- 6384 # https://epsg.io/6384\ncenter_proj <-\n  tibble(long, lat) %>%\n  st_as_sf(coords = c(\"long\", \"lat\"), crs = 4326)\n\n# 10km circle to crop in ----\ndist <-  10000\ncircle <- tibble(long, lat) %>%\n  st_as_sf(coords = c(\"long\", \"lat\"), crs = 4326) %>%\n  st_transform(crs = crs2) %>%\n  st_buffer(dist = dist) %>%\n  st_transform(crs = 4326)\n\nwater_area_crop <- water_area %>%\n  st_transform(crs = 4326) %>%\n  st_intersection(circle)\nwater_linear_crop <- water_linear %>%\n  st_transform(crs = 4326) %>%\n  st_intersection(circle)\n```\n:::\n\n\n## Plot code\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nggplot() +\n  geom_sf(data = circle, color = \"black\", fill =  \"white\") +\n  geom_sf(data=water_area_crop, fill=\"#173C6D\",color=\"#173C6D\", size=.4) +\n  geom_sf(data=water_linear_crop, color=\"#0096c7\", size=.3) +\n  coord_sf() +\n  theme_void() +\n  theme(\n    plot.subtitle = element_markdown(size=13, lineheight = 1, face=\"bold\", hjust=.5, margin=margin(t=-10)),\n    plot.title = element_markdown(family=f2, size=7.5, lineheight=1.4,margin=margin(l=-70, t=300, b=-350)),\n    plot.caption=element_text(family=f2,color=\"#33415c\",hjust = .5, size=7, margin=margin(t=-5)),\n    plot.margin=margin(t=0,l=3,r=.2,b=.3,unit=\"cm\"),\n    plot.background = element_rect(fill = \"grey98\", color = NA)\n    ) +\n  labs(subtitle=\"Winthrop, Washington\", \n       title=\"<span style='font-size:12pt;color:#173C6D'><b>Area hydrography</b></span><br><span style='color:#173C6D;'>(ponds, lakes, oceans, swamps)</span><br><br><span style='font-size:12pt;color:#0096c7'><b>Linear hydrography</b></span><br><span style='color:#0096c7'>(streams/rivers, braided streams, canals,<br>ditches, artificial paths, aqueducts)</span>\", \n       caption=\"#30DayMapChallenge 18 Color Friday: Blue\\nSource: US Census via {tigris} R package\")\n```\n\n::: {.cell-output-display}\n![](day18_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::",
    "supporting": [
      "day18_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}